<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>向上滑动</title>
    <link rel="stylesheet" href="http://at.alicdn.com/t/font_848332_psf474rnttf.css">
    <style>
    *{margin: 0;padding: 0;}
    body,html{font-size: 12px;font-family: "微软雅黑";height: 100%;width: 100%;}
    .banner-num{position: absolute;width: 130px;height: 30px;border-radius: 30px;background-color: rgba(58, 58, 58, 0.8);top: 304px;left: 500px;top:90%;left: 47%;}
    .banner-num a span{display:block;height: 15px;width: 15px;background-color: rgba(255, 255, 255, 0.49);border-radius: 50px;}
    .banner-num a{display: inline-block;padding-top: 8px;padding-left: 7px;}
    .banner-num a span.active{width: 37px}
    /* 导航条 */
    .nav{height: 80px;background-color: rgb(46, 46, 46);width: 100%;position: absolute;}
    /* banner部分 */
    .banner{position: relative;top: 80px;overflow: hidden;}
    .bannerimg{background: #333;position: relative;left: 0;height: 640px;}
    img{width: 100%;height: 640px;}
    /* icon部分 */
    .commadn .iconfont{font-size: 76px;color: rgba(28, 28, 28, 0.3607843137254902);cursor: pointer;}
    .commadn .iconfont:hover{color:rgba(219, 219, 219, 0.856);}
    .imgcontent{font-size: 0px;}
    </style>
</head>
<body>
    <div class="nav">

    </div>
    <div class="banner" id="banner">
        <div class="bannerimg" id="bannercontent">
            <div class="imgcontent" id="test" style="opacity:1"><a href="javascript:;"><img src="./img/01.jpg" alt="" ></a></div>
            <div class="imgcontent" ><a href="javascript:;"><img src="./img/02.jpg" alt=""></a></div>
            <div class="imgcontent" ><a href="javascript:;"><img src="./img/03.jpg" alt=""></a></div>
            <div class="imgcontent" ><a href="javascript:;"><img src="./img/04.jpg" alt=""></a></div>
        </div>
        <div class="banner-num" id="bannernum">
            <a href="javasript:;"><span class="active" data-slice="0"></span></a>
            <a href="javasript:;"><span data-slice="1"></span></a>
            <a href="javasript:;"><span data-slice="2"></span></a>
            <a href="javasript:;"><span data-slice="3"></span></a>
        </div>
    </div>

    <script>
        function $(id){
            return document.getElementById(id)
        }
        window.onload = function(){
            var imgDom = $("bannercontent");
            var imgChild = imgDom.children;
            var numDom = $("bannernum");
            var spanDom = numDom.getElementsByTagName("span");
            var len = numDom.children.length;
            var imgHeight = imgChild[0].offsetHeight;
            var num = 0;
            var sTimer = null;
            var hh = imgChild[0].offsetHeight;
            console.log(hh)
            imgDom.style.height = hh + "px";
            console.log()
            for(var i=0;i<len;i++){
                // var hh = imgChild[i].offsetHeight;
                // imgDom.style.height = hh + "px"
                spanDom[i].onmouseover = function(){
                    var index = parseInt(this.getAttribute("data-slice"))
                    num = index;
                    num2 = index;
                    for(var i=0;i<len;i++){
                        spanDom[i].className = "";
                    }
                    this.className = "active";
                    move(imgDom,"top",-imgHeight*index)
                }
            };

            
            sTimer = setInterval(playbanner,2000);
            var num2 = 0;
            function playbanner(){
                if(num == 0){
                    imgChild[0].style.position = "static";
                    imgDom.style.top = 0+"px";
                    num2 = 0;
                }
                if(num == (len-1)){
                    imgChild[0].style.position = "relative";
                    imgChild[0].style.top = len*imgHeight +"px";
                    num = 0;
                }else{
                    num++
                }
                num2++;
                for(var i=0;i<len;i++){
                    spanDom[i].className = "";
                }
                spanDom[num].className = "active";
                move(imgDom,"top",-imgHeight*num2)
            }
            $("banner").onmouseover = function(){
                clearInterval(sTimer);
            }
            $("banner").onmouseout = function(){
                clearInterval(sTimer);
                sTimer = setInterval(playbanner,2000)
            }
        }
        function move(dom,attr,target){
            clearInterval(dom.timer)
            dom.timer = setInterval(function(){
                var mark = true;
                var cur =  parseInt(getStyle(dom,attr));
                var speed = (target - cur) *0.2;
                speed = (speed>0 ? Math.ceil(speed) : Math.floor(speed));
                if(cur != target){
                    mark = false;
                    dom.style[attr] = speed + cur + "px"
                };
                if(mark){
                    clearInterval(dom.timer)
                }
            },30)
        }
        function getStyle(dom,attr){
            return window.getComputedStyle ? window.getComputedStyle(dom,false)[attr] : dom.currentStyle[attr];
        }
    </script>
</body>
</html>