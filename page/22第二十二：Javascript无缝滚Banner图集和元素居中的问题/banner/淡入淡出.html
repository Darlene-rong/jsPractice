<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>淡入淡出</title>
    <link rel="stylesheet" href="http://at.alicdn.com/t/font_848332_psf474rnttf.css">
    <style>
    *{margin: 0;padding: 0;}
    body,html{font-size: 12px;font-family: "微软雅黑";height: 100%;width: 100%;}
    .banner-num{position: absolute;width: 130px;height: 30px;border-radius: 30px;background-color: rgba(58, 58, 58, 0.8);top: 304px;left: 500px;top:90%;left: 47%;}
    .banner-num a span{display:block;height: 15px;width: 15px;background-color: rgba(255, 255, 255, 0.49);border-radius: 50px;}
    .banner-num a{display: inline-block;padding-top: 8px;padding-left: 7px;}
    .banner-num a span.active{width: 37px}
    /* 导航条 */
    .nav{height: 80px;background-color: rgb(46, 46, 46);width: 100%;}
    /* banner部分 */
    .banner{position: relative;}
    .bannerimg{background: #333;}
    .bannerimg{height: auto;}
    .bannerimg{height: 570px;}
    img{width:100%;}
    .imgcontent{position: absolute;opacity:0;}
    /* icon部分 */
    .bannericon{position: absolute;}
    </style>
</head>
<body>
    <div class="nav">

    </div>
    <div class="banner">
        <div class="bannerimg" id="bannercontent">
            <div class="imgcontent" style="opacity:1"><a href="javascript:;"><img src="./img/01.jpg" alt="" ></a></div>
            <div class="imgcontent" ><a href="javascript:;"><img src="./img/02.jpg" alt=""></a></div>
            <div class="imgcontent" ><a href="javascript:;"><img src="./img/03.jpg" alt=""></a></div>
            <div class="imgcontent" ><a href="javascript:;"><img src="./img/04.jpg" alt=""></a></div>
        </div>
        <div class="banner-num" id="bannernum">
            <a href="javasript:;"><span class="active" data-slice="0"></span></a>
            <a href="javasript:;"><span data-slice="1"></span></a>
            <a href="javasript:;"><span data-slice="2"></span></a>
            <a href="javasript:;"><span data-slice="3"></span></a>
        </div>
        <div class="bannericon">
            <div><i class="iconfont icon-left-circle"></i></div>
            <div><i class="iconfont icon-right-circle"></i></div>
        </div>
    </div>

    <script>
        function $(id){
            return document.getElementById(id)
        }
        window.onload = function(){
            var bannerDom = $("bannernum");
            var numdomChild = bannerDom.getElementsByTagName("span");
            var imgDom = $("bannercontent");
            var imgChid = imgDom.children;
            var len = numdomChild.length;
            for(var i=0;i<len;i++){
                numdomChild[i].onmouseover = function(){
                    var num = this.getAttribute("data-slice");
                    for(var i=0;i<len;i++){
                        numdomChild[i].className = "";
                        move(imgChid[i],0)
                        // imgChid[i].style.display = "none";
                    }
                    this.className = "active";
                    imgChid[num].style.display = "block"
                    move(imgChid[num],100)
                }
                

            }
        }
        function move(dom,target){
            var timer = null;
            //让每次动画都是新的
            clearInterval(dom.timer)
            dom.timer = setInterval(function(){
                var mark = true;
                var cur = null;
                cur = getStyle(dom,"opacity") * 100;
                var speed = (target - cur ) * 0.2;
                speed = (speed>0 ? Math.ceil(speed) : Math.floor(speed))
                console.log(cur);
                if(cur != target ){
                    mark = false;
                    dom.style.opacity =(cur +speed)/100;
                    console.log("12")
                }
                if(mark){
                    clearInterval(dom.timer)
                }
            },30)
        }
        //获取内部样式 封装
        function getStyle(dom,attr){
            return window.getComputedStyle ? window.getComputedStyle(dom,false)[attr] : dom.currentStylr[attr];
        }
    </script>
</body>
</html>